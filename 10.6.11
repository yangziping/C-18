#include<iostream>
#include<string>
using namespace std;
int i=0;//循环单位 
int fff(int a[],int num)
{
	int sum=0,count=1;
	for(int i=num-1;i>=0;i--)
	{
		sum+=a[i]*count;
		count*=10;
	}
	return sum;
}
class Expr{
	string s;
	int value;
	int analy(){
		int left=1,cur=0,num=0,the_position[20],j=0;
		for(;i<s.length();i++)
		{
		switch(s[i])
		{
			case '*':cur=0;break;
			case '/':cur=1;break;
			case '0':case '1':case '2':case '3':case '4':case '5':case '6':case '7':case '8':case '9':{
				num++;
				the_position[j++]=s[i]-48;
				if(s[i+1]>='0'&&s[i+1]<='9')
				continue;
				if(cur==0)
				left*=fff(the_position,num);
				if(cur==1)
				left/=fff(the_position,num);
				num=0;j=0;
				break;
			}
			case '-':{
				if(i!=0)
				{
					i--;
					return left;
				}
				left=-left;
				break;
			}
			default:i--;return left;
		}
		}
	}
	public:
	Expr(const char*c="1+1=") {s=c;
	}
	void error()
	{
		cout<<"算式错误"<<endl;
	}
	void eval()
	{
		int left=analy();
		for(;i<s.length();i++)
		{
			switch(s[i]){
				case '+':{
					i++;
					left+=analy();
					break;
				}
				case '-':{
					i++;
					left-=analy();
					break;
				}
				default:value=left;break;
			}
		}
	}
	void print() {cout<<s<<value<<endl;
	}
}; 
int main()
{
	Expr e=Expr("5*8+40=");
	e.eval();
	e.print();
	return 0;
}
